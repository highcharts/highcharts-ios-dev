/**
 * @license Highcharts JS v4.2.6 (2016-08-02)
 * Client side exporting module
 *
 * (c) 2015 Torstein Honsi / Oystein Moseng
 *
 * License: www.highcharts.com/license
 */
!function(a){"object"==typeof module&&module.exports?module.exports=a:a(Highcharts)}(function(a){function h(a,b){var c=d.getElementsByTagName("head")[0],e=d.createElement("script");e.type="text/javascript",e.src=a,e.onload=b,c.appendChild(e)}var b=a.win,c=b.navigator,d=b.document,e=b.URL||b.webkitURL||b,f=/Edge\/|Trident\/|MSIE /.test(c.userAgent),g=f?150:0;a.CanVGRenderer={},a.downloadURL=function(a,e){var g,f=d.createElement("a");if(c.msSaveOrOpenBlob)return void c.msSaveOrOpenBlob(a,e);if(void 0!==f.download)f.href=a,f.download=e,f.target="_blank",d.body.appendChild(f),f.click(),d.body.removeChild(f);else try{if(g=b.open(a,"chart"),void 0===g||null===g)throw"Failed to open window"}catch(c){var h={};h.image=a,b.location.href="hig://export#"+escape(JSON.stringify(h))}},a.svgToDataUrl=function(a){var d=c.userAgent.indexOf("WebKit")>-1&&c.userAgent.indexOf("Chrome")<0;try{if(!d&&c.userAgent.toLowerCase().indexOf("firefox")<0)return e.createObjectURL(new b.Blob([a],{type:"image/svg+xml;charset-utf-16"}))}catch(a){}return"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(a)},a.imageToDataUrl=function(a,c,e,f,h,i,j,k,l){var n,m=new b.Image,o=function(){setTimeout(function(){var i,b=d.createElement("canvas"),g=b.getContext&&b.getContext("2d");try{if(g){b.height=m.height*f,b.width=m.width*f,g.drawImage(m,0,0,b.width,b.height);try{i=b.toDataURL(c),h(i,c,e,f)}catch(b){n(a,c,e,f)}}else j(a,c,e,f)}finally{l&&l(a,c,e,f)}},g)},p=function(){k(a,c,e,f),l&&l(a,c,e,f)};n=function(){m=new b.Image,n=i,m.crossOrigin="Anonymous",m.onload=o,m.onerror=p,m.src=a},m.onload=o,m.onerror=p,m.src=a},a.downloadSVGLocal=function(f,g,i,j,k,l){var m,n,p,o=!0;if("image/svg+xml"===i)try{c.msSaveOrOpenBlob?(n=new MSBlobBuilder,n.append(f),m=n.getBlob("image/svg+xml")):m=a.svgToDataUrl(f),a.downloadURL(m,g),l&&l()}catch(a){k()}else m=a.svgToDataUrl(f),p=function(){try{e.revokeObjectURL(m)}catch(a){}},a.imageToDataUrl(m,i,{},j,function(b){try{a.downloadURL(b,g),l&&l()}catch(a){k()}},function(){var e=d.createElement("canvas"),m=e.getContext("2d"),n=f.match(/^<svg[^>]*width\s*=\s*\"?(\d+)\"?[^>]*>/)[1]*j,q=f.match(/^<svg[^>]*height\s*=\s*\"?(\d+)\"?[^>]*>/)[1]*j,r=function(){m.drawSvg(f,0,0,n,q);try{a.downloadURL(c.msSaveOrOpenBlob?e.msToBlob():e.toDataURL(i),g),l&&l()}catch(a){k()}finally{p()}};e.width=n,e.height=q,b.canvg?r():(o=!0,h(a.getOptions().global.canvasToolsURL,function(){r()}))},k,k,function(){o&&p()})},a.Chart.prototype.getSVGForLocalExport=function(b,c,d,e){var g,i,j,k,l,f=this,h=0,m=function(a,b,c){++h,c.imageElement.setAttributeNS("http://www.w3.org/1999/xlink","href",a),h===g.length&&e(f.sanitizeSVG(i.innerHTML))};a.wrap(a.Chart.prototype,"getChartHTML",function(a){return i=this.container.cloneNode(!0),a.apply(this,Array.prototype.slice.call(arguments,1))}),f.getSVGForExport(b,c),g=i.getElementsByTagName("image");try{if(!g.length)return void e(f.sanitizeSVG(i.innerHTML));for(k=0,l=g.length;k<l;++k)j=g[k],a.imageToDataUrl(j.getAttributeNS("http://www.w3.org/1999/xlink","href"),"image/png",{imageElement:j},b.scale,m,d,d,d)}catch(a){d()}},a.Chart.prototype.exportChartLocal=function(b,c){var d=this,e=a.merge(d.options.exporting,b),g=e&&e.type||"image/png",h=function(){if(e.fallbackToExportServer===!1){if(!e.error)throw"Fallback to export server disabled";e.error()}else d.exportChart(e)},i=function(b){var c=(e.filename||"chart")+"."+("image/svg+xml"===g?"svg":g.split("/")[1]);a.downloadSVGLocal(b,c,g,e.scale,h)};return f&&"image/svg+xml"!==g&&d.container.getElementsByTagName("image").length?void h():void d.getSVGForLocalExport(e,c,h,i)},a.getOptions().exporting.buttons.contextButton={symbol:"menu",onclick:function(){this.exportChartLocal()}}});
