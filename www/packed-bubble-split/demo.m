#import <UIKit/UIKit.h>
#import <Highcharts/Highcharts.h>

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad {
    [super viewDidLoad];
    
    HIChartView *chartView = [[HIChartView alloc] initWithFrame:self.view.bounds];

    HIOptions *options = [[HIOptions alloc]init];

    HIChart *chart = [[HIChart alloc]init];
    chart.type = @"packedbubble";
    chart.height = @"100%";

    HITitle *title = [[HITitle alloc]init];
    title.text = @"Carbon emissions around the world (2014)";

    HITooltip *tooltip = [[HITooltip alloc]init];
    tooltip.useHTML = [[NSNumber alloc] initWithBool:true];
    tooltip.pointFormat = @"<b>{point.name}:</b> {point.value}m CO<sub>2</sub>";

    HIPlotOptions *plotoptions = [[HIPlotOptions alloc]init];
    plotoptions.packedbubble = [[HIPackedbubble alloc] init];
    plotoptions.packedBubble.minSize = @"20%";
    plotoptions.packedBubble.maxSize = @"100%";
//    plotoptions.packedBubble.zMin = @0;
//    plotoptions.packedBubble.zMax = @1000;
    plotoptions.packedBubble.layoutAlgorithm = [[HILayoutAlgorithm alloc] init];
    plotoptions.packedBubble.layoutAlgorithm.gravitationalConstant = @0.05;
    plotoptions.packedBubble.layoutAlgorithm.splitSeries = @"true";
    plotoptions.packedBubble.layoutAlgorithm.seriesInteraction = [[NSNumber alloc] initWithBool:false];
    plotoptions.packedBubble.layoutAlgorithm.dragBetweenSeries = [[NSNumber alloc] initWithBool:true];
    plotoptions.packedBubble.layoutAlgorithm.parentNodeLimit = [[NSNumber alloc] initWithBool:true];

    HIDataLabels *dataLabels = [[HIDataLabels alloc] init];
    dataLabels.enabled = [[NSNumber alloc] initWithBool:true];
    dataLabels.format = @"{point.name}";
    dataLabels.filter = [[HIFilter alloc] init];
    dataLabels.filter.property = @"y";
    dataLabels.filter.operator = @">";
    dataLabels.filter.value = @250;
    dataLabels.style = [[HIStyle alloc] init];
    dataLabels.style.color = @"black";
    dataLabels.style.textOutline = @"none";
    dataLabels.style.fontWeight = @"normal";
    plotoptions.packedBubble.dataLabels = [NSArray arrayWithObjects:dataLabels, nil];

    HIPackedbubble *packedbubble1 = [[HIPackedbubble alloc] init];
    packedbubble1.name = @"Europe";
    HIData *data11 = [[HIData alloc] init];
    data11.name = @"Germany";
    data11.value = @767.1;
    HIData *data12 = [[HIData alloc] init];
    data12.name = @"Croatia";
    data12.value = @20.7;
    HIData *data13= [[HIData alloc] init];
    data13.name = @"Belgium";
    data13.value = @97.2;
    HIData *data14 = [[HIData alloc] init];
    data14.name = @"Czech Republic";
    data14.value = @111.7;
    HIData *data15 = [[HIData alloc] init];
    data15.name = @"Netherlands";
    data15.value = @158.1;
    HIData *data16 = [[HIData alloc] init];
    data16.name = @"Spain";
    data16.value = @241.6;
    HIData *data17 = [[HIData alloc] init];
    data17.name = @"Ukraine";
    data17.value = @249.1;
    HIData *data18 = [[HIData alloc] init];
    data18.name = @"Poland";
    data18.value = @298.1;
    HIData *data19 = [[HIData alloc] init];
    data19.name = @"France";
    data19.value = @323.7;
    HIData *data110 = [[HIData alloc] init];
    data110.name = @"Romania";
    data110.value = @78.3;
    HIData *data111 = [[HIData alloc] init];
    data111.name = @"United Kingdom";
    data111.value = @415.4;
    HIData *data112 = [[HIData alloc] init];
    data112.name = @"Turkey";
    data112.value = @353.2;
    HIData *data113 = [[HIData alloc] init];
    data113.name = @"Italy";
    data113.value = @337.6;
    HIData *data114 = [[HIData alloc] init];
    data114.name = @"Greece";
    data114.value = @71.1;
    HIData *data115 = [[HIData alloc] init];
    data115.name = @"Austria";
    data115.value = @69.8;
    HIData *data116 = [[HIData alloc] init];
    data116.name = @"Belarus";
    data116.value = @67.7;
    HIData *data117 = [[HIData alloc] init];
    data117.name = @"Serbia";
    data117.value = @59.3;
    HIData *data118 = [[HIData alloc] init];
    data118.name = @"Finland";
    data118.value = @54.8;
    HIData *data119 = [[HIData alloc] init];
    data119.name = @"Bulgaria";
    data119.value = @51.2;
    HIData *data120 = [[HIData alloc] init];
    data120.name = @"Portugal";
    data120.value = @48.3;
    HIData *data121 = [[HIData alloc] init];
    data121.name = @"Norway";
    data121.value = @44.4;
    HIData *data122 = [[HIData alloc] init];
    data122.name = @"Sweden";
    data122.value = @44.3;
    HIData *data123 = [[HIData alloc] init];
    data123.name = @"Hungary";
    data123.value = @43.7;
    HIData *data124 = [[HIData alloc] init];
    data124.name = @"Switzerland";
    data124.value = @40.2;
    HIData *data125 = [[HIData alloc] init];
    data125.name = @"Denmark";
    data125.value = @40;
    HIData *data126 = [[HIData alloc] init];
    data126.name = @"Slovakia";
    data126.value = @34.7;
    HIData *data127 = [[HIData alloc] init];
    data127.name = @"Ireland";
    data127.value = @34.6;
    HIData *data128 = [[HIData alloc] init];
    data128.name = @"Croatia";
    data128.value = @20.7;
    HIData *data129 = [[HIData alloc] init];
    data129.name = @"Estonia";
    data129.value = @19.4;
    HIData *data130 = [[HIData alloc] init];
    data130.name = @"Slovenia";
    data130.value = @16.7;
    HIData *data131 = [[HIData alloc] init];
    data131.name = @"Lithuania";
    data131.value = @12.3;
    HIData *data132 = [[HIData alloc] init];
    data132.name = @"Luxembourg";
    data132.value = @10.4;
    HIData *data133 = [[HIData alloc] init];
    data133.name = @"Macedonia";
    data133.value = @9.5;
    HIData *data134 = [[HIData alloc] init];
    data134.name = @"Moldova";
    data134.value = @7.8;
    HIData *data135 = [[HIData alloc] init];
    data135.name = @"Latvia";
    data135.value = @7.5;
    HIData *data136 = [[HIData alloc] init];
    data136.name = @"Cyprus";
    data136.value = @7.2;
    packedbubble1.data = [NSArray arrayWithObjects:data11, data12, data13, data14, data15, data16, data17, data18, data19, data110, data111, data112, data113, data114, data115, data116, data117, data118, data119, data120, data121, data122, data123, data124, data125, data126, data127, data128, data129, data130, data131, data132, data133, data134, data135, data136, nil];

    HIPackedbubble *packedbubble2 = [[HIPackedbubble alloc] init];
    packedbubble2.name = @"Africa";
    HIData *data21 = [[HIData alloc] init];
    data21.name = @"Senegal";
    data21.value = @8.2;
    HIData *data22 = [[HIData alloc] init];
    data22.name = @"Cameroon";
    data22.value = @9.2;
    HIData *data23 = [[HIData alloc] init];
    data23.name = @"Zimbabwe";
    data23.value = @13.1;
    HIData *data24 = [[HIData alloc] init];
    data24.name = @"Ghana";
    data24.value = @14.1;
    HIData *data25 = [[HIData alloc] init];
    data25.name = @"Kenya";
    data25.value = @14.1;
    HIData *data26 = [[HIData alloc] init];
    data26.name = @"Sudan";
    data26.value = @17.3;
    HIData *data27 = [[HIData alloc] init];
    data27.name = @"Tunisia";
    data27.value = @24.3;
    HIData *data28 = [[HIData alloc] init];
    data28.name = @"Angola";
    data28.value = @25;
    HIData *data29 = [[HIData alloc] init];
    data29.name = @"Libya";
    data29.value = @50.6;
    HIData *data210 = [[HIData alloc] init];
    data210.name = @"Ivory Coast";
    data210.value = @7.3;
    HIData *data211 = [[HIData alloc] init];
    data211.name = @"Morocco";
    data211.value = @60.7;
    HIData *data212 = [[HIData alloc] init];
    data212.name = @"Ethiopia";
    data212.value = @8.9;
    HIData *data213 = [[HIData alloc] init];
    data213.name = @"United Republic of Tanzania";
    data213.value = @9.1;
    HIData *data214 = [[HIData alloc] init];
    data214.name = @"Nigeria";
    data214.value = @93.9;
    HIData *data215 = [[HIData alloc] init];
    data215.name = @"South Africa";
    data215.value = @392.7;
    HIData *data216 = [[HIData alloc] init];
    data216.name = @"Egypt";
    data216.value = @225.1;
    HIData *data217 = [[HIData alloc] init];
    data217.name = @"Algeria";
    data217.value = @141.5;
    packedbubble2.data = [NSArray arrayWithObjects:data21, data22, data23, data24, data25, data26, data27, data28, data29, data210, data211, data212, data213, data214, data215, data216, data217, nil];

    HIPackedbubble *packedbubble3 = [[HIPackedbubble alloc] init];
    packedbubble3.name = @"Oceania";
    HIData *data31 = [[HIData alloc] init];
    data31.name = @"Australia";
    data31.value = @409.4;
    HIData *data32 = [[HIData alloc] init];
    data32.name = @"New Zealand";
    data32.value = @34.1;
    HIData *data33 = [[HIData alloc] init];
    data33.name = @"Papua New Guinea";
    data33.value = @7.1;
    packedbubble3.data = [NSArray arrayWithObjects:data31, data32, data33, nil];

    HIPackedbubble *packedbubble4 = [[HIPackedbubble alloc] init];
    packedbubble4.name = @"North America";
    HIData *data41 = [[HIData alloc] init];
    data41.name = @"Costa Rica";
    data41.value = @7.6;
    HIData *data42 = [[HIData alloc] init];
    data42.name = @"Honduras";
    data42.value = @8.4;
    HIData *data43 = [[HIData alloc] init];
    data43.name = @"Jamaica";
    data43.value = @8.3;
    HIData *data44 = [[HIData alloc] init];
    data44.name = @"Panama";
    data44.value = @10.2;
    HIData *data45 = [[HIData alloc] init];
    data45.name = @"Guatemala";
    data45.value = @12;
    HIData *data46 = [[HIData alloc] init];
    data46.name = @"Dominican Republic";
    data46.value = @23.4;
    HIData *data47 = [[HIData alloc] init];
    data47.name = @"Cuba";
    data47.value = @30.2;
    HIData *data48 = [[HIData alloc] init];
    data48.name = @"USA";
    data48.value = @5334.5;
    HIData *data49 = [[HIData alloc] init];
    data49.name = @"Canada";
    data49.value = @566;
    HIData *data410 = [[HIData alloc] init];
    data410.name = @"Mexico";
    data410.value = @456.3;
    packedbubble4.data = [NSArray arrayWithObjects:data41, data42, data43, data44, data45, data46, data47, data48, data49, data410, nil];

    HIPackedbubble *packedbubble5 = [[HIPackedbubble alloc] init];
    packedbubble5.name = @"South America";
    HIData *data51 = [[HIData alloc] init];
    data51.name = @"El Salvador";
    data51.value = @7.2;
    HIData *data52 = [[HIData alloc] init];
    data52.name = @"Uruguay";
    data52.value = @8.1;
    HIData *data53 = [[HIData alloc] init];
    data53.name = @"Bolivia";
    data53.value = @17.8;
    HIData *data54 = [[HIData alloc] init];
    data54.name = @"Trinidad and Tobago";
    data54.value = @34;
    HIData *data55 = [[HIData alloc] init];
    data55.name = @"Ecuador";
    data55.value = @43;
    HIData *data56 = [[HIData alloc] init];
    data56.name = @"Chile";
    data56.value = @78.6;
    HIData *data57 = [[HIData alloc] init];
    data57.name = @"Peru";
    data57.value = @52;
    HIData *data58 = [[HIData alloc] init];
    data58.name = @"Colombia";
    data58.value = @74.1;
    HIData *data59 = [[HIData alloc] init];
    data59.name = @"Brazil";
    data59.value = @501.1;
    HIData *data510 = [[HIData alloc] init];
    data510.name = @"Argentina";
    data510.value = @199;
    HIData *data511 = [[HIData alloc] init];
    data511.name = @"Venezuela";
    data511.value = @195.2;
    packedbubble5.data = [NSArray arrayWithObjects:data51, data52, data53, data54, data55, data56, data57, data58, data59, data510, data511, nil];

    HIPackedbubble *packedbubble6 = [[HIPackedbubble alloc] init];
    packedbubble6.name = @"Asia";
    HIData *data61 = [[HIData alloc] init];
    data61.name = @"Nepal";
    data61.value = @6.5;
    HIData *data62 = [[HIData alloc] init];
    data62.name = @"Georgia";
    data62.value = @6.5;
    HIData *data63 = [[HIData alloc] init];
    data63.name = @"Brunei Darussalam";
    data63.value = @7.4;
    HIData *data64 = [[HIData alloc] init];
    data64.name = @"Kyrgyzstan";
    data64.value = @7.4;
    HIData *data65 = [[HIData alloc] init];
    data65.name = @"Afghanistan";
    data65.value = @7.9;
    HIData *data66 = [[HIData alloc] init];
    data66.name = @"Myanmar";
    data66.value = @9.1;
    HIData *data67 = [[HIData alloc] init];
    data67.name = @"Mongolia";
    data67.value = @14.7;
    HIData *data68 = [[HIData alloc] init];
    data68.name = @"Sri Lanka";
    data68.value = @16.6;
    HIData *data69 = [[HIData alloc] init];
    data69.name = @"Bahrain";
    data69.value = @20.5;
    HIData *data610 = [[HIData alloc] init];
    data610.name = @"Yemen";
    data610.value = @22.6;
    HIData *data611 = [[HIData alloc] init];
    data611.name = @"Jordan";
    data611.value = @22.3;
    HIData *data612 = [[HIData alloc] init];
    data612.name = @"Lebanon";
    data612.value = @21.1;
    HIData *data613 = [[HIData alloc] init];
    data613.name = @"Azerbaijan";
    data613.value = @31.7;
    HIData *data614 = [[HIData alloc] init];
    data614.name = @"Singapore";
    data614.value = @47.8;
    HIData *data615 = [[HIData alloc] init];
    data615.name = @"Hong Kong";
    data615.value = @49.9;
    HIData *data616 = [[HIData alloc] init];
    data616.name = @"Syria";
    data616.value = @52.7;
    HIData *data617 = [[HIData alloc] init];
    data617.name = @"DPR Korea";
    data617.value = @59.9;
    HIData *data618 = [[HIData alloc] init];
    data618.name = @"Israel";
    data618.value = @64.8;
    HIData *data619 = [[HIData alloc] init];
    data619.name = @"Turkmenistan";
    data619.value = @70.6;
    HIData *data620 = [[HIData alloc] init];
    data620.name = @"Oman";
    data620.value = @74.3;
    HIData *data621 = [[HIData alloc] init];
    data621.name = @"Qatar";
    data621.value = @88.8;
    HIData *data622 = [[HIData alloc] init];
    data622.name = @"Philippines";
    data622.value = @96.9;
    HIData *data623 = [[HIData alloc] init];
    data623.name = @"Kuwait";
    data623.value = @98.6;
    HIData *data624 = [[HIData alloc] init];
    data624.name = @"Uzbekistan";
    data624.value = @122.6;
    HIData *data625 = [[HIData alloc] init];
    data625.name = @"Iraq";
    data625.value = @139.9;
    HIData *data626 = [[HIData alloc] init];
    data626.name = @"Pakistan";
    data626.value = @158.1;
    HIData *data627 = [[HIData alloc] init];
    data627.name = @"Vietnam";
    data627.value = @190.2;
    HIData *data628 = [[HIData alloc] init];
    data628.name = @"United Arab Emirates";
    data628.value = @201.1;
    HIData *data629 = [[HIData alloc] init];
    data629.name = @"Malaysia";
    data629.value = @227.5;
    HIData *data630 = [[HIData alloc] init];
    data630.name = @"Kazakhstan";
    data630.value = @236.2;
    HIData *data631 = [[HIData alloc] init];
    data631.name = @"Thailand";
    data631.value = @272;
    HIData *data632 = [[HIData alloc] init];
    data632.name = @"Taiwan";
    data632.value = @276.7;
    HIData *data633 = [[HIData alloc] init];
    data633.name = @"Indonesia";
    data633.value = @453;
    HIData *data634 = [[HIData alloc] init];
    data634.name = @"Saudi Arabia";
    data634.value = @494.8;
    HIData *data635 = [[HIData alloc] init];
    data635.name = @"Japan";
    data635.value = @1278.9;
    HIData *data636 = [[HIData alloc] init];
    data636.name = @"China";
    data636.value = @10540.8;
    HIData *data637 = [[HIData alloc] init];
    data637.name = @"India";
    data637.value = @2341.9;
    HIData *data638 = [[HIData alloc] init];
    data638.name = @"Russia";
    data638.value = @1766.4;
    HIData *data639 = [[HIData alloc] init];
    data639.name = @"Iran";
    data639.value = @618.2;
    HIData *data640 = [[HIData alloc] init];
    data640.name = @"Korea";
    data640.value = @610.1;
    packedbubble6.data = [NSArray arrayWithObjects:data61, data62, data63, data64, data65, data66, data67, data68, data69, data610, data611, data612, data613, data614, data615, data616, data617, data618, data619, data620, data621, data622, data623, data624, data625, data626, data627, data628, data629, data630, data631, data632, data633, data634, data635, data636, data637, data638, data639, data640, nil];

    options.chart = chart;
    options.title = title;
    options.tooltip = tooltip;
    options.plotOptions = plotoptions;
    options.series = [NSMutableArray arrayWithObjects:packedbubble1, packedbubble2, packedbubble3, packedbubble4, packedbubble5, packedbubble6, nil];

    chartView.options = options;

    [self.view addSubview:chartView];
}

@end
